"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.arkFormData = void 0;var _schema = require("@ark/schema");
var _util = require("@ark/util");
var _scope = require("../scope.js");
const value = (0, _schema.rootSchema)(["string", _util.registry.FileConstructor]);
const parsedFormDataValue = value.rawOr(value.array());
const parsed = (0, _schema.rootSchema)({
  meta: "an object representing parsed form data",
  domain: "object",
  index: {
    signature: "string",
    value: parsedFormDataValue
  }
});
const arkFormData = exports.arkFormData = _scope.Scope.module({
  root: ["instanceof", FormData],
  value,
  parsed,
  parse: (0, _schema.rootSchema)({
    in: FormData,
    morphs: (data) => {
      const result = {};
      for (const [k, v] of data) {
        if (k in result) {
          const existing = result[k];
          if (typeof existing === "string" ||
          existing instanceof _util.registry.FileConstructor)
          result[k] = [existing, v];else

          existing.push(v);
        } else

        result[k] = v;
      }
      return result;
    },
    declaredOut: parsed
  })
}, {
  name: "FormData"
}); /* v9-feeb4ada680a9c26 */
